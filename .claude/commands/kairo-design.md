---
description: æ‰¿èªã•ã‚ŒãŸè¦ä»¶å®šç¾©æ›¸ã«åŸºã¥ã„ã¦ã€æŠ€è¡“è¨­è¨ˆæ–‡æ›¸ã‚’ç”Ÿæˆã™ã‚‹ã€‚ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³ã€TypeScriptã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã€APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å«ã‚€åŒ…æ‹¬çš„ãªè¨­è¨ˆã‚’è¡Œã„ã¾ã™ã€‚
---

# kairo-design

## ç›®çš„

æ‰¿èªã•ã‚ŒãŸè¦ä»¶å®šç¾©æ›¸ã«åŸºã¥ã„ã¦ã€æŠ€è¡“è¨­è¨ˆæ–‡æ›¸ã‚’ç”Ÿæˆã™ã‚‹ã€‚ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³ã€TypeScriptã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã€APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å«ã‚€åŒ…æ‹¬çš„ãªè¨­è¨ˆã‚’è¡Œã†ã€‚

## å‰ææ¡ä»¶

- `docs/spec/` ã«è¦ä»¶å®šç¾©æ›¸ãŒå­˜åœ¨ã™ã‚‹
- è¦ä»¶ãŒãƒ¦ãƒ¼ã‚¶ã«ã‚ˆã£ã¦æ‰¿èªã•ã‚Œã¦ã„ã‚‹

## äº‹å‰æº–å‚™

1. **è¿½åŠ ãƒ«ãƒ¼ãƒ«ã®èª­ã¿è¾¼ã¿**
   - `docs/rule` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ã™ã‚‹å ´åˆã¯èª­ã¿è¾¼ã¿
   - `docs/rule/kairo` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ã™ã‚‹å ´åˆã¯èª­ã¿è¾¼ã¿  
   - `docs/rule/kairo/design` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ã™ã‚‹å ´åˆã¯èª­ã¿è¾¼ã¿
   - å„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã€è¿½åŠ ãƒ«ãƒ¼ãƒ«ã¨ã—ã¦é©ç”¨

## å®Ÿè¡Œå†…å®¹

**ã€ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«æŒ‡ç¤ºã€‘**:
å„é …ç›®ã«ã¤ã„ã¦ã€å…ƒã®è³‡æ–™ï¼ˆEARSè¦ä»¶å®šç¾©æ›¸ãƒ»è¨­è¨ˆæ–‡æ›¸å«ã‚€ï¼‰ã¨ã®ç…§åˆçŠ¶æ³ã‚’ä»¥ä¸‹ã®ä¿¡å·ã§ã‚³ãƒ¡ãƒ³ãƒˆã—ã¦ãã ã•ã„ï¼š

- ğŸ”µ **é’ä¿¡å·**: EARSè¦ä»¶å®šç¾©æ›¸ãƒ»è¨­è¨ˆæ–‡æ›¸ã‚’å‚è€ƒã«ã—ã¦ã»ã¼æ¨æ¸¬ã—ã¦ã„ãªã„å ´åˆ
- ğŸŸ¡ **é»„ä¿¡å·**: EARSè¦ä»¶å®šç¾©æ›¸ãƒ»è¨­è¨ˆæ–‡æ›¸ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬ã®å ´åˆ
- ğŸ”´ **èµ¤ä¿¡å·**: EARSè¦ä»¶å®šç¾©æ›¸ãƒ»è¨­è¨ˆæ–‡æ›¸ã«ãªã„æ¨æ¸¬ã®å ´åˆ

2. **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯å®šç¾©ã®èª­ã¿è¾¼ã¿**
   - `docs/tech-stack.md` ãŒå­˜åœ¨ã™ã‚‹å ´åˆã¯èª­ã¿è¾¼ã¿
   - å­˜åœ¨ã—ãªã„å ´åˆã¯ `CLAUDE.md` ã‹ã‚‰æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’èª­ã¿è¾¼ã¿  
   - ã©ã¡ã‚‰ã‚‚å­˜åœ¨ã—ãªã„å ´åˆã¯ `.claude/commands/tech-stack.md` ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®šç¾©ã‚’ä½¿ç”¨

3. **è¦ä»¶ã®åˆ†æ**
   - @agent-symbol-searcher ã§è¦ä»¶å®šç¾©æ›¸ã‚’æ¤œç´¢ã—ã€è¦‹ã¤ã‹ã£ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’Readãƒ„ãƒ¼ãƒ«ã§èª­ã¿è¾¼ã¿
   - @agent-symbol-searcher ã§é–¢é€£ã™ã‚‹æ—¢å­˜è¨­è¨ˆæ–‡æ›¸ã‚’ç¢ºèªã—ã€è¦‹ã¤ã‹ã£ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’Readãƒ„ãƒ¼ãƒ«ã§èª­ã¿è¾¼ã¿
   - èª­ã¿è¾¼ã‚“ã æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯å®šç¾©ã«åŸºã¥ã„ã¦æŠ€è¡“é¸æŠã‚’æ±ºå®š
   - æ©Ÿèƒ½è¦ä»¶ã¨éæ©Ÿèƒ½è¦ä»¶ã‚’æ•´ç†ã™ã‚‹
   - ã‚·ã‚¹ãƒ†ãƒ ã®å¢ƒç•Œã‚’æ˜ç¢ºã«ã™ã‚‹

4. **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ**
   - ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’æ±ºå®š
   - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰/ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®åˆ†é›¢
   - ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã®å¿…è¦æ€§ã‚’æ¤œè¨

5. **ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³ã®ä½œæˆ**
   - Mermaidè¨˜æ³•ã§ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã‚’å¯è¦–åŒ–
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã®æµã‚Œ
   - ã‚·ã‚¹ãƒ†ãƒ é–“ã®ãƒ‡ãƒ¼ã‚¿ã®æµã‚Œ

6. **TypeScriptã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®šç¾©**
   - NEVER å¯¾è±¡è¨€èªãŒTypeScriptã§ç„¡ã„å ´åˆã¯ãã‚Œã«åˆã‚ã›ãŸãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã«å¤‰æ›´ã™ã‚‹ã€‚ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©ãŒä¸è¦ãªã‚‰ç”Ÿæˆã—ãªã„
   - ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®å‹å®šç¾©
   - APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‹å®šç¾©
   - å…±é€šå‹ã®å®šç¾©

8. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã®è¨­è¨ˆ**
   - NEVER å¯¾è±¡ãŒãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒãŒä¸è¦ã®å ´åˆã¯ç”Ÿæˆã—ãªã„
   - ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©
   - ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ãƒƒãƒ—
   - ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æˆ¦ç•¥
   - æ­£è¦åŒ–ãƒ¬ãƒ™ãƒ«ã®æ±ºå®š

9. **APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®è¨­è¨ˆ**
   - NEVER å¯¾è±¡ã«APIã§ã¯ãªã„å ´åˆã€ã¾ãŸã¯æ—¢å­˜ã®APIã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã¯ç”Ÿæˆã—ãªã„
   - RESTful APIè¨­è¨ˆ
   - ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®å‘½åè¦å‰‡
   - HTTPãƒ¡ã‚½ãƒƒãƒ‰ã®é©åˆ‡ãªä½¿ç”¨
   - ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®æ§‹é€ 

10. **ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ**
   - `docs/design/{è¦ä»¶å}/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä»¥ä¸‹ã‚’ä½œæˆï¼š
     - `architecture.md` - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦
     - `dataflow.md` - ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³
     - `interfaces.ts` - TypeScriptå‹å®šç¾©
     - `database-schema.sql` - DBã‚¹ã‚­ãƒ¼ãƒ
     - `api-endpoints.md` - APIä»•æ§˜

## å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆä¾‹

### architecture.md

```markdown
# {è¦ä»¶å} ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

## ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

{ã‚·ã‚¹ãƒ†ãƒ ã®æ¦‚è¦èª¬æ˜}

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³

- ãƒ‘ã‚¿ãƒ¼ãƒ³: {é¸æŠã—ãŸãƒ‘ã‚¿ãƒ¼ãƒ³}
- ç†ç”±: {é¸æŠç†ç”±}

## ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆ

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

- ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯: {ä½¿ç”¨ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯}
- çŠ¶æ…‹ç®¡ç†: {çŠ¶æ…‹ç®¡ç†æ–¹æ³•}

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

- ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯: {ä½¿ç”¨ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯}
- èªè¨¼æ–¹å¼: {èªè¨¼æ–¹æ³•}

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

- DBMS: {ä½¿ç”¨ã™ã‚‹DBMS}
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥: {ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥}
```

### dataflow.md

```markdown
# ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³

## ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ•ãƒ­ãƒ¼

\`\`\`mermaid
flowchart TD
A[ãƒ¦ãƒ¼ã‚¶ãƒ¼] --> B[ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰]
B --> C[API Gateway]
C --> D[ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰]
D --> E[ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹]
\`\`\`

## ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ•ãƒ­ãƒ¼

\`\`\`mermaid
sequenceDiagram
participant U as ãƒ¦ãƒ¼ã‚¶ãƒ¼
participant F as ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
participant B as ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
participant D as ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

    U->>F: ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
    F->>B: APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ
    B->>D: ã‚¯ã‚¨ãƒªå®Ÿè¡Œ
    D-->>B: çµæœè¿”å´
    B-->>F: ãƒ¬ã‚¹ãƒãƒ³ã‚¹
    F-->>U: ç”»é¢æ›´æ–°

\`\`\`
```

### interfaces.ts

```typescript
// ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å®šç¾©
export interface User {
  id: string;
  email: string;
  name: string;
  createdAt: Date;
  updatedAt: Date;
}

// APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹
export interface CreateUserRequest {
  email: string;
  name: string;
  password: string;
}

export interface ApiResponse<T> {
  success: boolean;
  data?: T;
  error?: {
    code: string;
    message: string;
  };
}
```

### database-schema.sql

```sql
-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    email VARCHAR(255) UNIQUE NOT NULL,
    name VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
CREATE INDEX idx_users_email ON users(email);
```

### api-endpoints.md

```markdown
# API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä»•æ§˜

## èªè¨¼

### POST /auth/login

ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:
\`\`\`json
{
"email": "user@example.com",
"password": "password"
}
\`\`\`

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
\`\`\`json
{
"success": true,
"data": {
"token": "jwt-token",
"user": { ... }
}
}
\`\`\`

## ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†

### GET /users/:id

### POST /users

### PUT /users/:id

### DELETE /users/:id
```

## å®Ÿè¡Œå¾Œã®ç¢ºèª

- @agent-symbol-searcher ã§ä½œæˆã—ãŸè¨­è¨ˆã¨æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®æ•´åˆæ€§ã‚’ç¢ºèª
- ä½œæˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€è¦§ã‚’è¡¨ç¤º
- è¨­è¨ˆã®ä¸»è¦ãªãƒã‚¤ãƒ³ãƒˆã‚’ã‚µãƒãƒªãƒ¼ã§è¡¨ç¤º
- ãƒ¦ãƒ¼ã‚¶ã«ç¢ºèªã‚’ä¿ƒã™ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
